<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Inventario</title>
    </h:head>
    <h:body>
        <!--Show success or error messages-->
        <h:form>
            <p:messages id="messages" autoUpdate="true" showDetail="true" closable="true">
            </p:messages>
        </h:form>
        <!--End show success or error messages-->

        <!-- Current User info-->
        <ui:include src="../menu/header.xhtml"/>
        <!-- End current user-->
        
        <!--Menu Section-->
        <ui:include src="../menu/nav.xhtml"/>
        <!--End Menu section-->

        <!--Here put your code -->
        <div style="width: 80%; float: left;">
            
            <!-- Register form inventario -->
            <h:form id="crearInventario">
                <p:panel header="AÃ±adir prendas al inventario">
                    <p:panelGrid columns="2">
                        <p:outputLabel for="cantidadInicial" value="Cantidad Inicial: "/>
                        <p:inputNumber value="#{inventarioBean.inventarioPrenda.cantidadInicial}" id="cantidadInicial" required="true" requiredMessage="Es necesario ingresar la cantidad a ingresar de prendas"/>
                        <p:outputLabel for="articulo" value="Articulo: "/>
                        <p:autoComplete id="articulo" value="#{inventarioBean.inventarioPrenda.articuloIdarticulo}" dropdown="true" 
                                        completeMethod="#{articuloBean.resultDataAutoComplete}" var="articulodata"
                                        itemLabel="#{articulodata.toStringAutoComplete()}" itemValue="#{articulodata}"
                                        converter="articuloConverter" forceSelection="true" required="true"
                                        requiredMessage="Es necesario seleccionar un articulo">
                            <p:ajax event="itemSelect" onstart="#{inventarioBean.inventarioPrenda.articuloIdarticulo}"/>
                        </p:autoComplete>
                    </p:panelGrid>
                </p:panel>
                <p:commandButton value="Guardar" icon="fa fa-save" update="@this :crearInventario :tableInventario" actionListener="#{inventarioBean.makeInventario}"/>
            </h:form>
            
            <p:dataTable id="tableInventario" value="#{inventarioBean.prendasExistentes}" var="datainventario">
                <p:column headerText="Articulo">
                    <p:outputLabel value="#{datainventario.articuloIdarticulo.nombre}"/>
                </p:column>
                <p:column headerText="Cantidad Actual">
                    <p:outputLabel value="#{datainventario.cantidadActual}"/>
                </p:column>
            </p:dataTable>
        </div>
        <!--End container-->
    </h:body>
</html>